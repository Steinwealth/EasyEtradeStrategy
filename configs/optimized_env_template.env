# ===== ETrade Strategy - Optimized Configuration Template =====
# Peak performance configuration with Production Signal Generator integration
# Copy this to .env and configure with your settings
# Last updated: 2025-01-27

# ===== SYSTEM IDENTITY =====
PROJECT_NAME=ETrade Strategy
VERSION=2.0
ENVIRONMENT=development

# ===== MODES =====
AUTOMATION_MODE=off             # off | demo | live
STRATEGY_MODE=standard          # standard | advanced | quantum
SYSTEM_MODE=full_trading        # signal_only | scanner_only | full_trading | alert_only

# ===== PRODUCTION SIGNAL GENERATOR CONFIGURATION =====
# THE ONE AND ONLY signal generator for peak performance
PRODUCTION_SIGNAL_GENERATOR_ENABLED=true
PRODUCTION_SIGNAL_ACCEPTANCE_RATE=0.25
PRODUCTION_SIGNAL_WIN_RATE=0.85
PRODUCTION_SIGNAL_AVG_PNL=0.071
PRODUCTION_SIGNAL_PROFIT_FACTOR=4.57

# Production Signal Generator Performance Targets
PRODUCTION_SIGNAL_TARGET_LATENCY_MS=50
PRODUCTION_SIGNAL_TARGET_THROUGHPUT=200
PRODUCTION_SIGNAL_TARGET_MEMORY_MB=512

# Production Signal Generator Quality Settings (Enhanced)
PRODUCTION_SIGNAL_MIN_RSI=52.0
PRODUCTION_SIGNAL_MAX_RSI=75.0
PRODUCTION_SIGNAL_MIN_VOLUME_RATIO=1.01
PRODUCTION_SIGNAL_MIN_BUYERS_RATIO=0.45
PRODUCTION_SIGNAL_MIN_QUALITY_SCORE=55.0
PRODUCTION_SIGNAL_MIN_CONFIDENCE=0.65
PRODUCTION_SIGNAL_MIN_EXPECTED_RETURN=0.015

# Production Signal Generator Advanced Analysis Weights
PRODUCTION_SIGNAL_MOMENTUM_WEIGHT=0.25
PRODUCTION_SIGNAL_PATTERN_WEIGHT=0.20
PRODUCTION_SIGNAL_VOLUME_PROFILE_WEIGHT=0.10
PRODUCTION_SIGNAL_RSI_WEIGHT=0.15
PRODUCTION_SIGNAL_VOLUME_WEIGHT=0.20
PRODUCTION_SIGNAL_TECHNICAL_WEIGHT=0.10

# Production Signal Generator Monitoring
PRODUCTION_SIGNAL_MONITORING_ENABLED=true
PRODUCTION_SIGNAL_METRICS_RETENTION_DAYS=90
PRODUCTION_SIGNAL_ALERT_THRESHOLD=0.8
PRODUCTION_SIGNAL_AUTO_OPTIMIZATION=true

# ===== SIGNAL OPTIMIZATION CONFIGURATION =====
# Advanced signal optimization for peak performance
SIGNAL_OPTIMIZATION_ENABLED=true
SIGNAL_OPTIMIZATION_INTERVAL_SECONDS=300
SIGNAL_OPTIMIZATION_BATCH_SIZE=20
SIGNAL_OPTIMIZATION_PARALLEL_WORKERS=4

# Signal Quality Enhancement
SIGNAL_QUALITY_ENHANCEMENT=true
SIGNAL_QUALITY_THRESHOLD=0.75
SIGNAL_QUALITY_MONITORING=true
SIGNAL_QUALITY_AUTO_ADJUSTMENT=true

# Signal Performance Monitoring
SIGNAL_PERFORMANCE_MONITORING=true
SIGNAL_PERFORMANCE_INTERVAL_SECONDS=60
SIGNAL_PERFORMANCE_ALERT_THRESHOLD=0.8
SIGNAL_PERFORMANCE_AUTO_OPTIMIZATION=true

# ===== PERFORMANCE OPTIMIZATION =====
# Memory management
MEMORY_LIMIT_MB=2048
MEMORY_CLEANUP_INTERVAL_SECONDS=300
MEMORY_PRESSURE_THRESHOLD=0.8
MEMORY_GC_FORCE_INTERVAL_SECONDS=600
ENABLE_MEMORY_OPTIMIZATION=true

# Caching optimization
CACHE_ENABLED=true
CACHE_SIZE_LIMIT=2000
CACHE_TTL_SECONDS=300
CACHE_CLEANUP_THRESHOLD=0.9
CACHE_EVICTION_POLICY=LRU
CACHE_OPTIMIZATION_ENABLED=true
CACHE_HIT_RATE_TARGET=85

# Connection optimization
CONNECTION_POOL_SIZE=20
CONNECTION_TIMEOUT_SECONDS=10
CONNECTION_RETRY_ATTEMPTS=3
CONNECTION_KEEPALIVE=true
CONNECTION_OPTIMIZATION_ENABLED=true

# Parallel processing
ENABLE_PARALLEL_PROCESSING=true
MAX_WORKERS=8
BATCH_SIZE=20
WORKER_QUEUE_SIZE=100

# ===== ALERTS =====
ALERTS_ENABLED=true
ALERT_WEBHOOK_URL=              # optional webhook URL
TELEGRAM_BOT_TOKEN=             # optional Telegram bot
TELEGRAM_CHAT_ID=               # optional Telegram chat id
TELEGRAM_ENABLED=true
TELEGRAM_ALERT_TYPES=entry,exit,error,performance,daily_summary
TELEGRAM_MAX_MESSAGES_PER_MINUTE=20

# Enhanced alerting
ALERT_ON_ENTRY_SIGNALS=true
ALERT_ON_EXIT_SIGNALS=true
ALERT_ON_ERRORS=true
ALERT_ON_PERFORMANCE_ISSUES=true
ALERT_ON_DATA_FAILURES=true
ALERT_ON_SIGNAL_GENERATION=true
ALERT_ON_POSITION_OPENING=true
ALERT_ON_POSITION_CLOSING=true

# ===== TIME & HOLIDAYS =====
TZ=America/New_York
HOLIDAYS_ENABLED=true
HOLIDAYS_CUSTOM_PATH=data/holidays_custom.json

# Market hours
MARKET_OPEN_TIME=09:30
MARKET_CLOSE_TIME=16:00
PREMARKET_START_TIME=04:00
AFTER_HOURS_END_TIME=20:00

# ===== DATA PROVIDERS (ETRADE FIRST) =====
# Data provider priority (ETRADE first for consistency)
DATA_PRIORITY=etrade,alpha_vantage,polygon,yfinance

# E*TRADE Configuration
ETRADE_ENABLED=true
ETRADE_REAL_TIME_QUOTES=true
ETRADE_BATCH_QUOTES=true
ETRADE_DAILY_CALL_LIMIT=1180
ETRADE_RATE_LIMIT_CALLS_PER_MINUTE=100
ETRADE_TIMEOUT_SECONDS=10
ETRADE_RETRY_ATTEMPTS=3
ETRADE_COST_PER_MONTH=0

# Polygon Configuration
POLYGON_API_KEY=
POLYGON_QPM_BUDGET=1500
POLYGON_TIMEOUT_SECONDS=10
POLYGON_RETRY_ATTEMPTS=3
POLYGON_COST_PER_MONTH=0

# Alpha Vantage Configuration
ALPHA_VANTAGE_API_KEY=
ALPHA_VANTAGE_DAILY_LIMIT=1200
ALPHA_VANTAGE_RATE_LIMIT_MS=500
ALPHA_VANTAGE_TIMEOUT_SECONDS=15
ALPHA_VANTAGE_RETRY_ATTEMPTS=2
ALPHA_VANTAGE_COST_PER_MONTH=50

# Yahoo Finance Configuration
YAHOO_FINANCE_ENABLED=true
YAHOO_FINANCE_RATE_LIMIT_MS=200
YAHOO_FINANCE_TIMEOUT_SECONDS=10
YAHOO_FINANCE_RETRY_ATTEMPTS=2
YAHOO_FINANCE_DELAYED_DATA=true
YAHOO_FINANCE_COST_PER_MONTH=0

# ===== STRATEGY / SIZING =====
USE_AVAILABLE_CASH=true
RESERVE_CASH_PCT=20              # keep 20% cash reserve
PER_TRADE_ALLOC_CAP_PCT=25       # notional cap (% of strategy equity)
PER_TRADE_RISK_CAP_PCT=10        # risk $ cap (% of strategy equity)
MAX_SLIPPAGE_PCT=0.8
BOT_TAG=EES                      # tag for bot positions

# Scanning configuration
OPEN_SCAN_SECONDS=5
SCAN_SECONDS=30
PREMARKET_SCAN_SECONDS=90
TIMEFRAME=1m
LOOKBACK_BARS=400
WATCHLIST_FILE=data/hybrid_watchlist.csv

# Enhanced scanning
MAX_WATCHLIST_SIZE=65
CORE_SYMBOL_COUNT=33
DYNAMIC_SYMBOL_COUNT=32
SCANNER_BATCH_SIZE=20
SCANNER_PARALLEL_WORKERS=4
SCANNER_CACHE_TTL_SECONDS=180

# ===== RISK / EXITS (SYNTHETIC) =====
HIDDEN_STOPS=true                # manage stops/TP in software (no broker stops)
STOP_POLL_SECONDS=5              # cadence for synthetic exit checks (sec)
EXIT_ORDER_TYPE=market           # market | limit_protect
EXIT_LIMIT_SLIP_BPS=30           # if limit_protect, basis points headroom

ATR_MULTIPLIER_STOP=1.5
TP_TRIM_PCT=25
ENABLE_MOMENTUM_EXITS=true
RSI_EXIT_BELOW=50
REQUIRE_VWAP_FOR_HOLD=true
MACD_EXIT=true
TIME_STOP_MINUTES=240            # time stop = 4 hours
ENABLE_TP2=true
TP2_PCT=45
TP2_ACTION=close
TP2_TRAIL_ATR_MULT=1.0

# Enhanced risk management
MAX_DAILY_LOSS_PCT=5.0
MAX_POSITION_SIZE_PCT=25.0
MAX_OPEN_POSITIONS=10
ENABLE_DYNAMIC_RISK_ADJUSTMENT=true
ENABLE_CORRELATION_RISK_MANAGEMENT=true
ENABLE_VOLATILITY_ADJUSTMENT=true

# ===== SYNTHETIC TRAILING =====
TRAIL_MODE=atr                   # atr | high_water
ATR_PERIOD=14
TRAIL_ATR_MULT=1.0
TRAIL_ONLY_RATCHET=true
TRAIL_AFTER_MINUTES=0            # delay before trailing activates
TRAIL_TIGHTEN_AFTER_MIN=60       # tighten trailing after X minutes in trade
TRAIL_TIGHTEN_ATR_MULT=0.8
TRAIL_ON_NEW_HIGH=true           # ratchet stop on new highs

# Enhanced trailing stops
ENABLE_PREMIUM_TRAILING=true
BREAK_EVEN_TRIGGER_PCT=0.5
ATR_TRAIL_START_PCT=1.0
PERCENTAGE_TRAIL_START_PCT=2.0
MOMENTUM_TRAIL_START_PCT=3.0
EXPLOSIVE_TRAIL_START_PCT=5.0
MOON_TRAIL_START_PCT=10.0

# ===== KILL-SWITCH & WATCHDOG =====
DAILY_DD_CAP_PCT=3               # max daily drawdown % before blocking entries
MAX_PROVIDER_FAIL_STREAK=5
FLATTEN_ON_KILL=true
STOP_WATCHDOG_SEC=15             # only used if failsafe broker stops are enabled

# Enhanced safety
KILL_SWITCH_ENABLED=true
EMERGENCY_STOP_LOSS_PCT=15.0
SAFETY_CHECKS=true
SAFETY_MONITORING_INTERVAL_SECONDS=15
SAFETY_ALERT_THRESHOLD=0.8

# ===== HTTP HEALTH/METRICS =====
PORT=8080
HOST=0.0.0.0
SESSION_LOG_LEVEL=INFO

# Enhanced monitoring
ENABLE_PERFORMANCE_MONITORING=true
PERFORMANCE_MONITORING_INTERVAL_SECONDS=30
PERFORMANCE_ALERT_THRESHOLD=0.8
PERFORMANCE_AUTO_OPTIMIZATION=true

# ===== E*TRADE (LIVE ONLY) =====
ETRADE_CONSUMER_KEY=
ETRADE_CONSUMER_SECRET=
ETRADE_OAUTH_CALLBACK=oob
ETRADE_ACCOUNT_ID_KEY=
ETRADE_TOKENS_PATH=data/etrade_tokens.json
ETRADE_SANDBOX=false

# ===== CRITICAL FEATURES CONFIGURATION =====
# News Sentiment Analysis
NEWS_SENTIMENT_ENABLED=true
NEWS_SENTIMENT_WEIGHT=0.15
NEWS_CONFIDENCE_THRESHOLD=0.5
NEWS_LOOKBACK_HOURS=24
NEWS_CACHE_MINUTES=30
POLYGON_API_KEY=
FINNHUB_API_KEY=
NEWSAPI_KEY=

# Move Capture System
MOVE_CAPTURE_ENABLED=true
EXPLOSIVE_MOVE_THRESHOLD=2.0
VOLUME_SPIKE_THRESHOLD=1.5
MOMENTUM_THRESHOLD=1.0
SMALL_MOVE_MIN_PCT=1.0
MODERATE_MOVE_MIN_PCT=3.0
LARGE_MOVE_MIN_PCT=5.0
EXPLOSIVE_MOVE_MIN_PCT=10.0
MOON_MOVE_MIN_PCT=20.0

# Quantum Strategy
QUANTUM_STRATEGY_ENABLED=true
QUANTUM_TARGET_WEEKLY_RETURN=0.35
QUANTUM_BASE_RISK_PER_TRADE=0.10
QUANTUM_MAX_RISK_PER_TRADE=0.25
QUANTUM_MIN_CONFIDENCE=0.95
QUANTUM_ML_WEIGHT=0.4
QUANTUM_TECHNICAL_WEIGHT=0.3
QUANTUM_VOLUME_WEIGHT=0.2
QUANTUM_SENTIMENT_WEIGHT=0.1

# Async Data Processing
ASYNC_PROCESSING_ENABLED=true
MAX_WORKERS=10
BATCH_SIZE=20
CONNECTION_POOL_SIZE=100
RATE_LIMIT_CALLS_PER_MINUTE=2000
RATE_LIMIT_BURST_CAPACITY=50
DATA_CACHE_MAX_SIZE=1000
DATA_CACHE_DEFAULT_TTL=300

# ===== PATHS =====
CORE_LIST_PATH=data/core_25.csv
HYBRID_LIST_PATH=data/hybrid_watchlist.csv
STATE_PATH=data/state.json
LOG_PATH=logs/signals.log
SYMBOL_PERFORMANCE_LOG=data/symbol_performance.json

# ===== PERFORMANCE TARGETS =====
TARGET_LATENCY_MS=50
TARGET_CACHE_HIT_RATE=85
TARGET_SUCCESS_RATE=99.5
TARGET_MEMORY_USAGE_MB=1024
TARGET_CPU_USAGE_PCT=70

# ===== COST OPTIMIZATION =====
ENABLE_COST_OPTIMIZATION=true
COST_ALERT_THRESHOLD=0.8
COST_AUTO_OPTIMIZATION=true
TARGET_DAILY_COST_USD=50
TARGET_MONTHLY_COST_USD=1000

# ===== GOOGLE CLOUD CONFIGURATION =====
GCP_PROJECT_ID=your_gcp_project_id
GCP_REGION=us-west2
GCP_ZONE=us-west2-a

# ===== EMERGENCY CONFIGURATION =====
ENABLE_EMERGENCY_MODE=true
EMERGENCY_MODE_TRIGGER_THRESHOLD=0.95
EMERGENCY_MODE_SIMPLIFIED_PROCESSING=true
EMERGENCY_MODE_REDUCED_MEMORY=true
EMERGENCY_MODE_REDUCED_CONNECTIONS=true

# ===== END OF CONFIGURATION =====
# This optimized configuration includes:
# - Production Signal Generator integration
# - Peak performance optimizations
# - Unified data provider management
# - Enhanced risk management
# - Critical features integration
# - Cost optimization
# - Emergency handling
